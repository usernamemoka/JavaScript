<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <input type="checkbox" name="" value="香蕉" id="">香蕉<br />
    <input type="checkbox" name="" value="苹果" id="">苹果<br />
    <input type="checkbox" name="" value="西瓜" id="">西瓜<br />
    <input type="checkbox" name="" value="哈密瓜" id="">哈密瓜<br />
    <script>
    //服务器环境下测试
    var aInput = document.getElementsByTagName("input");

    for(var i = 0 ;i < aInput.length; i++){
        aInput[i].onclick = function(){
            if(this.checked){
                window.localStorage.setItem('sel',this.value);//i是循环后的值了
            }
            else{
                window.localStorage.setItem('onSel',this.value);
            }
        };
    }

    window.addEventListener('storage', function(ev){//事件当前页面不会触发
        if(ev.key == 'sel'){
            for(var i = 0 ;i < aInput.length;i++){
                if(ev.newValue == aInput[i].value){
                    aInput[i].checked = true;
                }
            }
        }
        else if(ev.key == 'onSel'){
            for(var i = 0 ;i < aInput.length;i++){
                if(ev.newValue == aInput[i].value){
                    aInput[i].checked = false;
                }
            }
        }
    });
    </script>
</body>
</html>